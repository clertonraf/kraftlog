appId: host.exp.Exponent
---
# Start Workout Flow Test
# Tests: Navigate to routines → Start a workout → Log exercise

- launchApp
- openLink: exp://192.168.0.104:8081
- waitForAnimationToEnd:
    timeout: 5000

# Handle retry button if network error
- runFlow:
    when:
      visible: "Retry"
    commands:
      - tapOn: "Retry"
      - waitForAnimationToEnd:
          timeout: 3000

# Login if needed
- runFlow:
    when:
      visible: "Email"
    commands:
      - tapOn: "Email"
      - inputText: "admin@kraftlog.com"
      - tapOn: "Password"
      - inputText: "admin123"
      - tapOn: "Sign In"
      - waitForAnimationToEnd:
          timeout: 5000

# Wait for app to fully load
- waitForAnimationToEnd:
    timeout: 5000

# Navigate to Routines tab
- tapOn:
    point: "40%,95%"
- waitForAnimationToEnd:
    timeout: 3000

# Verify routines screen
- assertVisible:
    text: ".*"

# Try to start a workout if a routine exists
- runFlow:
    when:
      visible:
        id: "routine-card"
    commands:
      # Tap on routine
      - tapOn:
          id: "routine-card"
      - waitForAnimationToEnd:
          timeout: 2000
      # Look for Start Workout button
      - runFlow:
          when:
            visible: "Start"
          commands:
            - tapOn: "Start"
            - waitForAnimationToEnd:
                timeout: 3000
            # Verify workout started
            - assertVisible:
                text: ".*"
