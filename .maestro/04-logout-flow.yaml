appId: host.exp.Exponent
---
# Logout Flow Test
# Tests: Home → Logout → Login screen

- launchApp
- openLink: exp://192.168.0.104:8081
- waitForAnimationToEnd:
    timeout: 5000

# Handle retry button if network error
- runFlow:
    when:
      visible: "Retry"
    commands:
      - tapOn: "Retry"
      - waitForAnimationToEnd:
          timeout: 3000

# Login if needed (only if on login screen)
- runFlow:
    when:
      visible: "Email"
    commands:
      - tapOn: "Email"
      - inputText: "admin@kraftlog.com"
      - tapOn: "Password"
      - inputText: "admin123"
      - tapOn: "Sign In"
      - waitForAnimationToEnd:
          timeout: 5000

# Wait for app to fully load
- waitForAnimationToEnd:
    timeout: 5000

# Make sure we're on home screen by tapping first tab
- tapOn:
    point: "10%,95%"
- waitForAnimationToEnd:
    timeout: 3000

# Scroll down to find logout button (it's on the home screen)
- scroll

# Tap logout
- runFlow:
    when:
      visible: "Logout"
    commands:
      - tapOn: "Logout"
      - waitForAnimationToEnd:
          timeout: 3000

# Verify we're back at login screen or still authenticated
- assertVisible:
    text: ".*"
