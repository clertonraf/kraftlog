appId: host.exp.Exponent
---
# Tab Navigation Test  
# Tests: Navigate through bottom tabs

- launchApp

# Open the KraftLog app via deep link
- openLink: exp://192.168.0.104:8081
- waitForAnimationToEnd:
    timeout: 10000
- waitForAnimationToEnd:
    timeout: 5000

# If we see a Retry button (network error), tap it
- runFlow:
    when:
      visible: "Retry"
    commands:
      - tapOn: "Retry"
      - waitForAnimationToEnd:
          timeout: 5000
      - waitForAnimationToEnd:
          timeout: 3000

# Login if needed
- runFlow:
    when:
      visible: "Email"
    commands:
      - tapOn: "Email"
      - inputText: "admin@kraftlog.com"
      - tapOn: "Password"
      - inputText: "admin123"
      - tapOn: "Sign In"
      - waitForAnimationToEnd:
          timeout: 10000

# Wait for home screen to load and verify we're logged in
- runFlow:
    when:
      visible:
        text: "Welcome to KraftLog!"
        timeout: 15000
    commands:
      - assertVisible: "Welcome to KraftLog!"

- runFlow:
    when:
      notVisible: "Welcome to KraftLog!"
    commands:
      # If home text not visible yet, wait more and check we're not on login
      - waitForAnimationToEnd:
          timeout: 5000
      - assertNotVisible: "Sign In"

# Navigate to Routines tab
- waitForAnimationToEnd:
    timeout: 2000

# Tap on Routines tab
- runFlow:
    when:
      visible: "Routines"
    commands:
      - tapOn: "Routines"
      - waitForAnimationToEnd:
          timeout: 3000

# Verify we can see routines content (be flexible about what's visible)
- runFlow:
    when:
      visible: 
        text: "(My Routines|Routines|No routines)"
    commands:
      - assertVisible:
          text: "(My Routines|Routines|No routines)"

# Navigate to Exercises tab
- waitForAnimationToEnd:
    timeout: 2000

- runFlow:
    when:
      visible: "Exercises"
    commands:
      - tapOn: "Exercises"
      - waitForAnimationToEnd:
          timeout: 3000

# Verify we're on Exercises screen
- runFlow:
    when:
      visible:
        text: "(Exercises|All Exercises|No exercises)"
    commands:
      - assertVisible:
          text: "(Exercises|All Exercises|No exercises)"

# Back to Home tab
- waitForAnimationToEnd:
    timeout: 2000

- runFlow:
    when:
      visible: "Home"
    commands:
      - tapOn: "Home"
      - waitForAnimationToEnd:
          timeout: 3000

# Verify we're back on home
- assertVisible:
    text: "(Welcome to KraftLog!|Your Profile)"
