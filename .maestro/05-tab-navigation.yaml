appId: host.exp.Exponent
---
# Tab Navigation Test  
# Tests: Navigate through bottom tabs

- launchApp

# Open the KraftLog app via deep link
- openLink: exp://192.168.0.104:8081
- waitForAnimationToEnd:
    timeout: 10000
- waitForAnimationToEnd:
    timeout: 5000

# If we see a Retry button (network error), tap it
- runFlow:
    when:
      visible: "Retry"
    commands:
      - tapOn: "Retry"
      - waitForAnimationToEnd:
          timeout: 5000
      - waitForAnimationToEnd:
          timeout: 3000

# Login if needed
- runFlow:
    when:
      visible: "Email"
    commands:
      - tapOn: "Email"
      - inputText: "admin@kraftlog.com"
      - tapOn: "Password"
      - inputText: "admin123"
      - tapOn: "Sign In"
      - waitForAnimationToEnd:
          timeout: 5000
      - waitForAnimationToEnd:
          timeout: 3000

# Wait extra time for home screen to load
- waitForAnimationToEnd:
    timeout: 3000

# Verify we're on Home tab - check for "Your Profile" which is always visible
- assertVisible: "Your Profile"

# Navigate to Routines tab - tap on bottom tab bar
# Try multiple ways to tap the Routines tab
- runFlow:
    when:
      visible: "Routines"
    commands:
      - tapOn: "Routines"
      
- runFlow:
    when:
      notVisible: "Routines"
    commands:
      # Tap on the second tab (middle of screen, near bottom)
      - tapOn:
          point: "50%,95%"

- waitForAnimationToEnd:
    timeout: 2000

# Verify we're on Routines screen
- assertVisible: "My Routines"

# Navigate to Exercises tab
- runFlow:
    when:
      visible: "Exercises"
    commands:
      - tapOn: "Exercises"
      
- runFlow:
    when:
      notVisible: "Exercises"  
    commands:
      # Tap on the third tab (right side, near bottom)
      - tapOn:
          point: "75%,95%"

- waitForAnimationToEnd:
    timeout: 2000

# Verify we're on Exercises screen  
- assertVisible: "Exercise Library"

# Back to Home tab
- runFlow:
    when:
      visible: "Home"
    commands:
      - tapOn: "Home"
      
- runFlow:
    when:
      notVisible: "Home"
    commands:
      # Tap on first tab (left side, near bottom)
      - tapOn:
          point: "25%,95%"

- waitForAnimationToEnd
- assertVisible: "Your Profile"
